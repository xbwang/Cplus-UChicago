The prisoners could take the strategy like below:
Let's make the red hat as 1 and blue hat as 0.
The last prisoner first counts the total value of the hats. If the result is even, then he guesses blue(0). Otherwise he guesses red(1). Then the rest prisoners should remember the even or odd that the last prisoner tell them.
After that, the rest prisoners just need two values to find out the color of his hat. The first is the total value before him. The second is the total value after him(he can hear the guesses behind). Then he just add these two values to get the parity of the value, comparing with the information he gets from the last prisoner. If the parities are different, then he must wear a red hat since the amount of the red hat changes. Otherwise he must wear a blue hat.
Or explaining it in a math way is that, the rest prisoners could do an XOR on all the values he has(each value before him, after him and the value of the last prisoner). The result of the XOR means which hear he wears(1 for red and 0 for blue).
For example, all the value before the last prisoner is 10011010(RBBRRBRB). Then the last prisoner just guesses blue(0) since the sum is even. Now we have a sequence 100110100. Then for any prisoner, let's say the third one, he just do an XOR on the values except himself(10_110100), which is 1 XOR 0 XOR 1 XOR 1 XOR 0 XOR 1 XOR 0 XOR 0 = 0. Then he can guess blue(0) which is correct.